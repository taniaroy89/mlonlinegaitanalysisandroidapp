\chapter{Lo stato dell'arte}
%\myChapter{Lo stato dell'arte}
Il mondo scientifico che si è confrontato con il problema della segmentazione della deambulazione, e più in generale sull'analisi della deambulazione ed individuazione delle sue varie fasi, è molto vasto e variegato. 
Per avere una visuale completa sul panorama di ricerca in questo ambito, si può suddividere lo stato dell'arte per materiali e metodi usati. 


\section{Materiali} 
Per materiali si intende tutto l'arsenale fisico, usato per captare, misurare e raccogliere dati riguardanti la deambulazione. I materiali possono, a loro volta, essere suddivisi in quelli che permettono di fare misure dirette dei parametri della deambulazione, ovvero spostamento, velocità e accelerazione sia lineare che angolare di arti e articolazioni; e quelli che permettono di fare misurazioni indirette della deambulazione con sistemi di tracciamento del movimento.

\subsection{Osservazione diretta del paziente} Il fisiatra è figura medica che si occupa di diagnosi, terapia e riabilitazione di persone con problemi di limitazioni di attività, in questo caso motorie. Un fisiatra è in grado, ad occhio nudo, di fare una stima accurata dei parametri della deambulazione umana. 

\subsection{Stereofotogrammetria} 
\label{sec:stereofotogrammetria}
Metodologia di ricostruzione di oggetti ed del loro moto in tre dimensioni basato sulla sovrapposizione di immagini riprese da più telecamere posizionate intorno all'oggetto (vedi figura \ref{fig:vicon}). Sull'oggetto vengono posizionati dei marcatori riflettenti (vedi figura \ref{fig:markers}) che sono i punti di riferimento per le telecamere. I marcatori sono dei bulbi sferici in plastica retroriflettenente (superficie che riflette la luce alla sua sorgente minimizzando l'angolo di riflessione quindi minimizzando anche la dispersione di luce) di circa 14mm di diametro, attaccati ad una superficie quadrata della stessa dimensione, alle quali viene applicato del nastro biadesivo, mediante il quale vengono incollate sulla parte del corpo che vuole studiare. La ricostruzione del moto dell'oggetto avviene mediante il calcolo degli spostamenti relativi dei marker. Il sistema commerciale utilizzato in questo lavoro è Vicon\tm \cite{vicon.com}.
\TODO{METTERE UNA NOSTRA FOTO}
\begin{figure}
	\centering
		\includegraphics[width=.4\textwidth]{imgs/ReflectiveMarker.jpg}
	\caption{Marcatori riflettenti per il sistema Vicon\tm.}
	\label{fig:markers}
\end{figure}

\begin{figure}
	\centering
		\includegraphics[width=1\textwidth]{imgs/viconMotionCapture.jpg}
	\caption{Strumentazione del sistema stereofotogrammetrico Vicon\tm}
	\label{fig:vicon}
\end{figure}


\subsection{Sensori Inerziali}
\label{sensori_inerziali}
I sensori inerziali misurano, le forze inerziali (vedi appendice \ref{meccanica_classica}) che agiscono su di essi (vedi appendice \ref{sec:sensori}). 
\begin{itemize}
	\item \textbf{Resistori Sensibili alla forza}: misurano la forza esercitata dalla massa della persona, sul piano di deambulazione, accelerata dalla forza di gravità. 
	
\begin{table}%
\begin{tabular}{p{3cm}|p{8cm}}
\hline
\textsc{Sensore} & FSR (\textit{Force Sensitive Resistors})\\
\hline
\textsc{Posizione del sensore} & sotto le scarpe\\
\hline
\textsc{Hardware} & trasduttori (vedi appendice \ref{sec:sensori}) progettati come degli interruttori meccanici, sensibili al peso FSR\\
\hline
\textsc{limitazioni} & 
	\begin{itemize}
			\item non è possibile distinguere le variazioni di peso dovute alla deambulazione da quelle dovute allo spostamento di peso di altra natura. 
			\item passi tremolanti riducono l'affidabilità della percezione di un evento che stabilisca l'inizio o la fine di una fase del passo.  
	\end{itemize} \\
\hline
\end{tabular}
\newline
\caption{Sensori di forza: FSR}
\label{tab:sensori_forza}
\end{table}
		
	\item \textbf{Giroscopi} misurano l'accelerazione (momento) angolare. Questo può essere fatto meccanicamente con un giroscopio a rotazione o elettronicamente con un giroscopio a vibrazione (vedi appendice \ref{sec:gyroscope}). 

\begin{table}
\begin{tabular}{p{3cm}|p{8cm}}
\hline
\textsc{Sensore} & Giroscopio\\
\hline
\textsc{Posizione del sensore} & coscia, stinco, coscia e stinco\\
\hline
\textsc{Hardware} & Giroscopi\\
\hline
\textsc{vantaggi}&
\begin{itemize}
	\item non influenzati dalla forza di gravità;
	\item non influenzati da vibrazioni o scosse dovute alla deambulazione;
	\item meno influenzate (rispetto alle FRS) dal posizionamento sul corpo.
\end{itemize}\\
\hline
\textsc{limitazioni} & 
	\begin{itemize}
			\item non è possibile distinguere le variazioni di peso dovute alla deambulazione da quelle dovute allo spostamento di peso. 
			\item passi tremolanti riducono l'affidabilità della percezione di un evento che stabilisca l'inizio o la fine di una fase del passo.  
	\end{itemize}\\  
\hline
\end{tabular}
\newline
\caption{Giroscopi}
\label{tab:sensori_acc_ang}
\end{table}

	\item \textbf{Accelerometri} misurano il peso per unità di massa, questa quantità è nota come forza specifica o \textit{g-force}. In altre parole, misurando il peso il sensore misura l'accelerazione in un riferimento inerziale relativo all'accelerometro stesso.  

\begin{table}
\begin{tabular}{p{3cm}|p{8cm}}
\hline
\textsc{Sensore} & Accelerometro\\
\hline
\textsc{Posizione del sensore} & piede, collo del piede, stinco, polpaccio, coscia, schiena\\
\hline
\textsc{Hardware} & Accelerometri MEMS (\textit{Micro-Electro-Mechanical Systems})\\
\hline
\textsc{Vantaggi}&
\begin{itemize}
	\item permettono di individuare quasi tutte le fasi del cammino;
	\item sono dimensioni ridotte e costano poco.
\end{itemize}\\
\hline
\textsc{limitazioni} & 
	\begin{itemize}
		\item influenzati dalla forza di gravità;
		\item il loro posizionamento sul corpo è critico.
	\end{itemize}\\  
\hline
\end{tabular}
\newline
\caption{Accelerometri: MEMS}
\label{tab:sensori_acc}
\end{table}
	\item \textbf{Magnetometri} misurano il campo magnetico. Vi sono più modi per misurare il campo magnetico, quello maggiormente usato detto \textit{Fluxgate} funziona mediante un meccanismo elettrico (vedi appendice \ref{sec:magnetomerter}).
\end{itemize}

\begin{table}
\begin{tabular}{p{3cm}|p{8cm}}
\hline
\textsc{Hardware} & Magnetometro\\
\hline
\textsc{Forza misurata} & il campo magnetico terrestre\\
\hline
\textsc{Posizione del sensore} & piede, collo del piede, stinco, polpaccio, coscia, schiena\\
\hline
\textsc{Vantaggi}&
\begin{itemize}
	\item il campo magnetico, non essendo influenzato dal movimento della persona o dalla forza di gravità, offre un punto di riferimento per l'orientamento del corpo, e le misure hanno un'accuratezza maggiore. 
	\item In combinazione con altri sensori giroscopio permette di determinare 5 fasi del cammino. 
\end{itemize}\\
\hline
\textsc{limitazioni} & 
	\begin{itemize}
		\item influenzati dall forza di gravità; 
		\item il loro posizionamento sul corpo è critico.
	\end{itemize}  \\
\hline
\end{tabular}
\newline
\caption{Magnetometri}
\label{tab:sensori_mag}
\end{table}


I sensori qui presentati sono stati usati per l'analisi della deambulazione in diversi numeri e combinazioni. Una classificazione può essere fatta sulla base della grandezza fisica misurata dal singolo sensore o dall'insieme di sensori scelti. Tale grandezza fisica può essere:
\begin{description}
	\item [Forza] Il corpo umano esercita una forza (peso) sulla superficie su cui si trova. Un sensore per misurare tale forza, deve essere posizionato, tra il corpo e la superficie. La collocazione naturale di un sensore di forza è sotto la suola delle scarpe. 
I trasduttori \footnote{Un trasduttore è un dispositivo che converte un tipo di energia in un altro.} per tale scopo vengono progettati interruttori meccanici dipendenti dal peso o FSR.

Metodi di riabilitazione o di aiuto di persone con la sindrome del piede cadente (foot drop) basati sulla Stimolazione Elettrica Funzionale (FES) usavano inizialmente le FSR \cite{FES_foot_drop_correction}. 
Mentre i primi sistemi di questo tipo usavano microinterruttori puramente meccanici, ovvero azionati direttamente dalla pressione del piede, sistemi più recenti sono azionati da valori soglia (threshold) ottenuti mediante uno o più trasduttori FSR posizionati sotto il tallone, il metatarso e l'alluce \cite{leg_muscle_electical_stimulator, FES_foot_drop_correction}. Questi metodi a differenza dei primi, sono meno soggetti ad attivazioni dovute a spostamenti di peso non dovuti alla deambulazione. Con un interruttore singolo sotto il tallone si riescono ad ottenere informazioni sugli eventi HO e HS. Aggiungendo ulteriori sensori sotto il metacarpo o l'alluce si hanno informazioni sugli eventi FF e TO \cite{FES_foot_drop_correction}. Un altra tecnica che è stata usata per misurare la forza è usare suole sensibili alla forza, che ricoprono l'intera suola con una matrice di sensori \cite{real_time_parap_gait_event_detection}. L'accuratezza ed affidabilità di tali sistemi dipende soprattutto dai materiali usati.\\
Un'altra tecnica è basata su un sensore di pressione connesso ad un piccolo tubo, incollato al perimetro esterno della scarpa. In questo modo le variazioni nella forza esercitata sulla suola si manifestano in variazioni pneumatiche, che vengono poi misurate dal sensore di pressione \cite{foot_contact_masure}.  \\
Sistemi di individuazione di eventi di deambulazione basati su sensori di forza, sono considerati abbastanza standard per essere usati come riferimento per determinare l'accuratezza di metodi novelli per la medesima funzione. 
Ciò è dovuto al fatto che un sensore posto sotto i piedi sembri essere la scelta più naturale per sistemi di misura della deambulazione. 

Danno risultati soddisfacenti per la deambulazione normale {vedi definizione \ref{deambulazione_normale}}. Gli svantaggi dei sensori della forza sono l'impossibilità di discernere tra variazioni di carico dovute alla deambulazione da quelle dovute a spostamenti del peso (ad esempio da una gamba all'altra). Una deambulazioni strascicata riduce notevolmente l'affidabilità della individuazione degli eventi della deambulazione \cite{heel_contact_event_detection}. Altri difetti di questi sistemi sono la breve durata e la limitata applicabilità \cite{swing_phase_detection_stroke_gait}.

	\item [Accelerazione angolare] La maggior parte degli studi che hanno usato un giroscopio hanno optato per lo stesso tipo di sensore unidimensionale nella configurazione a singolo sensore \cite{stair_climbing_detection_gyr, practical_gait_analysis_gyr, unrestrained_measurement_stride_length_gyr} o tre sensori \cite{spatio_temporal_params_gait_gyr}. In tutti i casi i dati sono stati elaborati in differita (vedi appendice \ref{sec:online}). Sono state testate innumerevoli combinazioni di posizionamenti dei sensori: coscia \cite{unrestrained_measurement_stride_length_gyr}, stinco \cite{stair_climbing_detection_gyr}, coscia e stinco \cite{practical_gait_analysis_gyr} e su entrambe gli stinchi ed una sola coscia \cite{spatio_temporal_params_gait_gyr}.\\
	Dal segnale del sensore sono stati calcolati l'angolo dell'articolazione del ginocchio \cite{practical_gait_analysis_gyr}, l'angolo dell'articolazione dell'anca mediante l'integrazione della velocità angolare \cite{unrestrained_measurement_stride_length_gyr}. Uno dei problemi più comuni del giroscopio è il drift (deviazione) causata da una imprecisa calibrazione dello strumento.
	Un altro approccio è il cosiddetto studio di \textit{Wavelet}: la stima del HS, e HO mediante lo studio analitico del segnale del giroscopio in funzione del tempo \cite{spatio_temporal_params_gait_gyr, stair_climbing_detection_gyr}.
	La validazione del sistema è stata fatta su ciascun sistema, confrontando i risultati ottenuti mediante il sistema stereofotogrammetrico Vicon\tm (vedi sezione \ref{sec:stereofotogrammetria}), in condizioni di laboratorio.
	Un grande vantaggio della analisi del moto in generale mediante il giroscopio, è che questi non subisce l'effetto dell'accelerazione di gravità \cite{gait_event_detection_FES_acc_ML}. Inoltre le vibrazioni dei sensori durante gli esperimenti non influenzano il giroscopio \cite{kimematics_measurements_acc_gyr}. I giroscopi, rispetto agli FSR, sono meno sensibili al posizionamento sul corpo, un giroscopio posto in qualunque posizione di un segmento del corpo lungo lo stesso piano fornisce con variazioni minime gli stessi valori. Infine nessun tipo di movimento che non riguardi l'asse che percepisce il sensore viene catturato dallo strumento \cite{practical_gait_analysis_gyr}. 
	
	\item [Forza e Accelerazione angolare] Al fine di individuare gli eventi HS e HO, è stato messo a punto un sistema composto da tre FSR per catturare il carico verticale ed un giroscopio per misurare la velocità di rotazione del piede sul piano sagittale (vedi figura \ref{fig:HumanBodySPL}) \cite{reliable_gait_phase_anslysis}. Una volta posizionati gli FSR sotto il tallone, il primo ed il quarto metatarso ed il giroscopio monoassiale sul tallone, il sistema era in grado di individuare le fasi di appoggio e fase in aria in linea. La validazione è stata fatta in condizioni di laboratorio, anche questa volta con sistemi di cattura del movimento. Il sistema è stato incassato in una suola per poter essere usato con un meccanismo di FES di correzione della ricaduta del piede \cite{reliable_gait_phase_detection_gyr}. I vantaggi principali del sistema qui descritto sono l'affidabilità e la robustezza: riesce a distinguere semplici spostamenti di peso (ad esempio stando fermi, alzandosi o sedendosi) da variazioni di carico dovute alla deambulazione. I difetti del sistema sono collegati ai difetti degli FSR: la loro poca durata.
	\item [Accelerometria] La tecnologia MEMS (Micro-Electro-Mechanical Systems) (vedi appendice \ref{sec:sensori}) permette uno sviluppo di accelerometri in miniatura a basso consumo energetico, adatti al monitoraggio della deambulazione    \cite{walking_movement_pattern_quantification_acc}. I sensori usati negli esperimenti, misurano l'accelerazione in due  \cite{heel_contact_event_detection, swing_phase_detection_stroke_gait, human_body_movement_measurement_acc, real_time_gait_assessment_acc, lower_extreamity_angle_measurement_acc} o tre dimensioni  \cite{gait_event_detection_FES_acc_ML, walking_restoration_assistive_sensors, novel_approach_ambulatory_systems}, avendo più sensori monoassiali \cite{gait_event_detection_FES_acc_ML, human_body_movement_measurement_acc, real_time_gait_assessment_acc}, biassiali \cite{heel_contact_event_detection, swing_phase_detection_stroke_gait, lower_extreamity_angle_measurement_acc, gait_phase_automatic_recognition_acc} o triassiali  \cite{novel_approach_ambulatory_systems, walking_restoration_assistive_sensors}. Per misurare sia l'accelerazione lineare che rotazionale, i sensori vengono sistemati su coscia \cite{swing_phase_detection_stroke_gait}, stinchi \cite{gait_event_detection_FES_acc_ML, novel_approach_ambulatory_systems, human_body_movement_measurement_acc}, coscia e stinchi \cite{real_time_gait_assessment_acc, gait_phase_automatic_recognition_acc}, coscia, stinchi e bacino \cite{lower_extreamity_angle_measurement_acc}, piede, coscia, stinchi e bacino \cite{walking_restoration_assistive_sensors} o busto \cite{heel_contact_event_detection}.\\
	L'elaborazione dei dati provenienti dai suddetti sensori è stata fatta sia in modalità in linea che in differita. L'elaborazione in differita comprende l'analisi temporale dell'accelerazione verticale nel piano sagittale, i cambiamenti da positivo a negativo e viceversa, che sono stati correlati rispettivamente agli eventi HS e HO \cite{heel_contact_event_detection}. Un altro approccio ha dimostrato che è possibile rilevare gli eventi TO, ISw, TSw, HS sulla base dei dati della velocità angolare e lineare sul piano sagittale e frontale \cite{human_body_movement_measurement_acc}. \\
	Per quanto riguarda i sistemi in linea è stato dimostrato che permettano di rilevare gli eventi LO, MS, TS, PSw \cite{gait_event_detection_FES_acc_ML, gait_phase_automatic_recognition_acc} oppure HS e HO \cite{swing_phase_detection_stroke_gait}. L'uso  di accelerometri necessita di elaborazioni ulteriori del segnale per compensare all'influenza della forza di gravità. Il posizionamento dei sensori è un altro aspetto delicato, dovuto al movimento di muscoli durante la deambulazione. Un vantaggio degli accelerometri, è che l'evento HO è individuabile anche in individui che non hanno un contatto con il tallone molto definito \cite{gait_event_detection_FES_acc_ML} o con deambulazione strascicata \cite{heel_contact_event_detection}. 
	\item [Accelerometria e Accelerazione angolare] Il metodo di misurazione può essere basato su un modello bidimensionale su un piano sagittale \cite{kimematics_measurements_acc_gyr, uniaxial_joint_angles_measure_acc_gyr, walking_features_from_inertials, gait_event_detection_acc_gyr, reliability_acc_gyr_gait_event_id, wearable_sensor_sys} oppure tridimensionale \cite{kinematic_transients_locomotion, 3d_sensing_foot_movement}. Per modelli bidimensionali il gruppo di sensori può essere composto da due sensori inerziali unidimensionali ed un giroscopio bidimensionale \cite{kimematics_measurements_acc_gyr} oppure da un unico sensore inerziale bidimensionale che misuri le componenti tangenziali e radiali dell'accelerazione \cite{uniaxial_joint_angles_measure_acc_gyr}. I sistemi tridimensionali usano di solito un giroscopio tridimensionale ed un sensore inerziale tridimensionale \cite{kinematic_transients_locomotion, 3d_sensing_foot_movement}. Le unità di sensori sono montati su piedi \cite{walking_features_from_inertials, 3d_sensing_foot_movement}, stinco e coscia \cite{kimematics_measurements_acc_gyr, uniaxial_joint_angles_measure_acc_gyr, reliability_acc_gyr_gait_event_id}, o piedi, stinchi e cosce \cite{wearable_sensor_sys, kinematic_transients_locomotion}. I dati sono stati elaborati primariamente in differita ed hanno fornito informazioni sull'accelerazione di segmenti di arti, velocità di giunture ed eventi quali HS, TO e FF. La validazione di questi sistemi è stata fatta su soggetti sani \cite{kimematics_measurements_acc_gyr, uniaxial_joint_angles_measure_acc_gyr, walking_features_from_inertials, wearable_sensor_sys} e con problemi di deambulazione. I dati ottenuti sono stati confrontati con quelli prodotti da un sistema di ripresa in movimento : WATSMART\tm \cite{kinematic_transients_locomotion}, Vicon\tm \cite{kimematics_measurements_acc_gyr}, interruttori a piede \cite{walking_features_from_inertials, gait_event_detection_acc_gyr, reliability_acc_gyr_gait_event_id}. 
	
	
	\item [Accelerometria, Accelerazione angolare e Campo magnetico] La misurazione del campo magnetico terrestre mediante un magnetometro fornisce il campo gravitazionale terrestre ed una misura di riferimento per l'orientamento del corpo. Al contrario dell'accelerometria, il campo magnetico non è influenzato dai movimenti del corpo.  Sono state prodotte unità contenenti sensori sia uniassiali \cite{sensor_sys_lower_limbs_FES_control} che biassiali \cite{inertial_magnetic_sensor_joint_angle_measure} in combinazione con un magnetometro. 
I sensori sono stati posizionati al piede e stinco di una gamba oppure di entrambe le gambe.
I sistemi sono in grado di determinare angoli tra diverse articolazioni in tre dimensioni mediante l'analisi dei dati in differita \cite{inertial_magnetic_sensor_joint_angle_measure} o mediante l'analisi tempo reale \cite{sensor_sys_lower_limbs_FES_control}. Tali sistemi hanno permesso di individuare cinque eventi della deambulazione: LO, MS, TS, PSw e fase in aria con l'uso di misure dell'accelerazione e della sua derivata prima \cite{sensor_sys_lower_limbs_FES_control}. Anche gli eventi HS e TO sono stati individuati in corrispondenza di picchi nella rotazione lungo il piano sagittale dello stinco. Un modello di un doppio pendolo può essere usato per calcolare la lunghezza di un passo \cite{spatio_temporal_gait_paramerters}.
	\item [Inclinometria] Un sensore di inclinazione può essere usato per determinare l'inclinazione di una parte del corpo. Consiste di un elemento inerziale che percepisce la forza di gravità, come un liquido o un sistema costituito da una massa ed una molla. Quando il sensore è inclinato, la forza di gravità causa uno spostamento dell'elemento inerziale relativo al sistema del sensore. Tale spostamento viene registrato in una resistenza o capacitanza. Questi sistemi non sono abbastanza affidabili perché non distinguono la deambulazione da altri tipi di spostamenti del piede \cite{reliable_gait_phase_detection_gyr}. Inoltre rispondono ad accelerazioni, il che produce degli errori grossolani nei loro dati. 
\end{description}
				
\section{Metodi}
La grande sfida del rilevamento della deambulazione è di individuare gli eventi della deambulazione mentre la persona sta camminando ovvero in linea. Tradizionalmente il problema è stato affrontato con un insieme di regole basate su valori di soglia sulle emissioni, principalmente di interruttori da piede, e da tutti gli altri sistemi di sensori descritti in \ref{sensori_inerziali}. Tutti gli algoritmi pubblicati, consistono di gruppi di euristiche che cercano di identificare alcune caratteristiche dei parametri della deambulazione. Le regole sono state applicate con i seguenti approcci: analisi funzionale di dati non elaborati \cite{spatio_temporal_params_gait_gyr, real_time_gait_event_det_wearable, automatic_detection_gait_events_kinematic}, di dati derivati \cite{reliable_gait_phase_detection_gyr}, tecniche di apprendimento induttivo \cite{real_time_parap_gait_event_detection, swing_phase_detection_stroke_gait, gait_event_detection_FES_acc_ML, automatic_detection_gait_events_inductive_learning} oppure macchine a stati finiti \cite{reliable_gait_phase_detection_gyr, finite_state_control_FES}.
%\subsection{Meccanica-Cinematica} 
\subsection{Analisi} L'analisi funzionale comprende metodi matematici per disegnare curve che permettono di estrarre caratteristiche corrispondenti a determinate fasi della deambulazione. Le derivate prime e seconde dei dati dell'accelerazione verticale e orizzontale dal piede permettono di determinare gli eventi HS e TO soltanto usando delle regole basate su valori di soglia, con un'elaborazione in linea. \cite{real_time_gait_event_det_wearable}.
\subsection{Apprendimento Automatico} Per Apprendimento Automatico (o Apprendimento Automatico Induttivo) si intende una branca dell'Intelligenza Artificiale che comprende la progettazione di algoritmi che permettono ad un sistema di apprendere estraendo regole e schemi (\textit{pattern}) da un insieme di dati. Le regole base frutto del processo di apprendimento (addestramento) sono un insieme di associazioni tra valori in ingresso come il segnale di un giroscopio, e dei valori in uscita come le fasi della deambulazione. Le regole vengono classificate in base a delle stime di probabilità. Un esempio di applicazione dei metodi di Apprendimento Automatico al problema dell'analisi del cammino, correla i dati di un accelerometro in ingresso ed i dati relativi al contatto del piede con il suolo come dati in uscita desiderati, con l'utilizzo di Reti Neurali, per determinare gli eventi HS e HO \cite{swing_phase_detection_stroke_gait}. Un altro studio usa programmi commerciali di Apprendimento Automatico detti \textit{Rough Sets\tm} e Reti Logiche Adattive per l'analisi della deambulazione in linea usando come dati in ingresso segnali accelerometrici \cite{gait_event_detection_FES_acc_ML}.  

